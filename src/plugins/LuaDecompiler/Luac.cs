using System;
using System.IO;
using System.Text;
using ZoDream.LuaDecompiler.Models;
using ZoDream.Shared.Bundle;
using ZoDream.Shared.Language;
using ZoDream.Shared.Language.AST;
using ZoDream.Shared.Models;

namespace ZoDream.LuaDecompiler
{
    public partial class LuacReader
    {
        internal static string[] IdentItems = [
            "and", "break", "do", "else", "elseif", "end", "false", "for", "function", "if",
            "in", "local", "nil", "not", "or", "repeat", "return", "then", "true", "until",
            "while",
        ];

        private static readonly Operand[] _opcodeMapV50 = [
            Operand.MOVE,
            Operand.LOADK,
            Operand.LOADBOOL,
            Operand.LOADNIL,
            Operand.GETUPVAL,
            Operand.GETGLOBAL,
            Operand.GETTABLE,
            Operand.SETGLOBAL,
            Operand.SETUPVAL,
            Operand.SETTABLE,
            Operand.NEWTABLE50,
            Operand.SELF,
            Operand.ADD,
            Operand.SUB,
            Operand.MUL,
            Operand.DIV,
            Operand.POW,
            Operand.UNM,
            Operand.NOT,
            Operand.CONCAT,
            Operand.JMP,
            Operand.EQ,
            Operand.LT,
            Operand.LE,
            Operand.TEST50,
            Operand.CALL,
            Operand.TAILCALL,
            Operand.RETURN,
            Operand.FORLOOP,
            Operand.TFORLOOP,
            Operand.TFORPREP,
            Operand.SETLIST50,
            Operand.SETLISTO,
            Operand.CLOSE,
            Operand.CLOSURE,
        ];

        private static readonly Operand[] _opcodeMapV51 = [
            Operand.MOVE,
            Operand.LOADK,
            Operand.LOADBOOL,
            Operand.LOADNIL,
            Operand.GETUPVAL,
            Operand.GETGLOBAL,
            Operand.GETTABLE,
            Operand.SETGLOBAL,
            Operand.SETUPVAL,
            Operand.SETTABLE,
            Operand.NEWTABLE,
            Operand.SELF,
            Operand.ADD,
            Operand.SUB,
            Operand.MUL,
            Operand.DIV,
            Operand.MOD,
            Operand.POW,
            Operand.UNM,
            Operand.NOT,
            Operand.LEN,
            Operand.CONCAT,
            Operand.JMP,
            Operand.EQ,
            Operand.LT,
            Operand.LE,
            Operand.TEST,
            Operand.TESTSET,
            Operand.CALL,
            Operand.TAILCALL,
            Operand.RETURN,
            Operand.FORLOOP,
            Operand.FORPREP,
            Operand.TFORLOOP,
            Operand.SETLIST,
            Operand.CLOSE,
            Operand.CLOSURE,
            Operand.VARARG,
        ];
        private static readonly Operand[] _opcodeMapV52 = [
            Operand.MOVE,
            Operand.LOADK,
            Operand.LOADKX,
            Operand.LOADBOOL,
            Operand.LOADNIL52,
            Operand.GETUPVAL,
            Operand.GETTABUP,
            Operand.GETTABLE,
            Operand.SETTABUP,
            Operand.SETUPVAL,
            Operand.SETTABLE,
            Operand.NEWTABLE,
            Operand.SELF,
            Operand.ADD,
            Operand.SUB,
            Operand.MUL,
            Operand.DIV,
            Operand.MOD,
            Operand.POW,
            Operand.UNM,
            Operand.NOT,
            Operand.LEN,
            Operand.CONCAT,
            Operand.JMP52,
            Operand.EQ,
            Operand.LT,
            Operand.LE,
            Operand.TEST,
            Operand.TESTSET,
            Operand.CALL,
            Operand.TAILCALL,
            Operand.RETURN,
            Operand.FORLOOP,
            Operand.FORPREP,
            Operand.TFORCALL,
            Operand.TFORLOOP52,
            Operand.SETLIST52,
            Operand.CLOSURE,
            Operand.VARARG,
            Operand.EXTRAARG,
        ];
        private static readonly Operand[] _opcodeMapV53 = [
            Operand.MOVE,
            Operand.LOADK,
            Operand.LOADKX,
            Operand.LOADBOOL,
            Operand.LOADNIL52,
            Operand.GETUPVAL,
            Operand.GETTABUP,
            Operand.GETTABLE,
            Operand.SETTABUP,
            Operand.SETUPVAL,
            Operand.SETTABLE,
            Operand.NEWTABLE,
            Operand.SELF,
            Operand.ADD,
            Operand.SUB,
            Operand.MUL,
            Operand.MOD,
            Operand.POW,
            Operand.DIV,
            Operand.IDIV,
            Operand.BAND,
            Operand.BOR,
            Operand.BXOR,
            Operand.SHL,
            Operand.SHR,
            Operand.UNM,
            Operand.BNOT,
            Operand.NOT,
            Operand.LEN,
            Operand.CONCAT,
            Operand.JMP52,
            Operand.EQ,
            Operand.LT,
            Operand.LE,
            Operand.TEST,
            Operand.TESTSET,
            Operand.CALL,
            Operand.TAILCALL,
            Operand.RETURN,
            Operand.FORLOOP,
            Operand.FORPREP,
            Operand.TFORCALL,
            Operand.TFORLOOP52,
            Operand.SETLIST52,
            Operand.CLOSURE,
            Operand.VARARG,
            Operand.EXTRAARG,
        ];
        private static readonly Operand[] _opcodeMapV54 = [
            Operand.MOVE,
            Operand.LOADI,
            Operand.LOADF,
            Operand.LOADK,
            Operand.LOADKX,
            Operand.LOADBOOL,
            Operand.LOADNIL52,
            Operand.GETUPVAL,
            Operand.SETUPVAL,
            Operand.GETTABUP54,
            Operand.GETTABLE54,
            Operand.GETI,
            Operand.GETFIELD,
            Operand.SETTABUP54,
            Operand.SETTABLE54,
            Operand.SETI,
            Operand.SETFIELD,
            Operand.NEWTABLE54,
            Operand.SELF54,
            Operand.ADDI,
            Operand.ADDK,
            Operand.SUBK,
            Operand.MULK,
            Operand.MODK,
            Operand.POWK,
            Operand.DIVK,
            Operand.IDIVK,
            Operand.BANDK,
            Operand.BORK,
            Operand.BXORK,
            Operand.SHRI,
            Operand.SHLI,
            Operand.ADD54,
            Operand.SUB54,
            Operand.MUL54,
            Operand.MOD54,
            Operand.POW54,
            Operand.DIV54,
            Operand.IDIV54,
            Operand.BAND54,
            Operand.BOR54,
            Operand.BXOR54,
            Operand.SHL54,
            Operand.SHR54,
            Operand.MMBIN,
            Operand.MMBINI,
            Operand.MMBINK,
            Operand.UNM,
            Operand.BNOT,
            Operand.NOT,
            Operand.LEN,
            Operand.CONCAT54,
            Operand.CLOSE,
            Operand.TBC,
            Operand.JMP54,
            Operand.EQ54,
            Operand.LT54,
            Operand.LE54,
            Operand.EQK,
            Operand.EQI,
            Operand.LTI,
            Operand.LEI,
            Operand.GTI,
            Operand.GEI,
            Operand.TEST54,
            Operand.TESTSET54,
            Operand.CALL,
            Operand.TAILCALL54,
            Operand.RETURN54,
            Operand.RETURN0,
            Operand.RETURN1,
            Operand.FORLOOP54,
            Operand.FORPREP54,
            Operand.TFORPREP54,
            Operand.TFORCALL54,
            Operand.TFORLOOP54,
            Operand.SETLIST54,
            Operand.CLOSURE,
            Operand.VARARG54,
            Operand.VARARGPREP,
            Operand.EXTRAARG,
            Operand.LOADFALSE,
            Operand.LFALSESKIP,
            Operand.LOADTRUE,
        ];
    }
}
